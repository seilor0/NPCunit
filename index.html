<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NPCコマ作成</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="root">
    <main>
      <!-- 左メニュー -->
      <aside>
        <h1>NPCコマ<br>作成ツール</h1>
        <details class="square" name="aside">
          <summary>便利機能</summary>
          <div>
            <ul>
              <li class="ok">
                <span class="greenBold">チャパレ並び替え</span>
                <br>
                ドラッグ＆ドロップ
              </li>
              <li class="ok">
                <span class="greenBold">シークレットダイス（個別）</span>
                <br>
                チャパレ欄の☑
              </li>
              <li class="ok">
                <span class="greenBold">出力ON/OFF（個別）</span>
                <ul>
                  <li>パラメータ</li>
                  <li>ステータス</li>
                  <li>チャパレ</li>
                  <li>技能名</li>
                </ul>
                該当の欄をクリック
                <br>
              </li>
            </ul>
          </div>
        </details>

        <details class="square" name="aside">
          <summary>Import CCFOLIA unit</summary>
          <div>
            <p style="margin-block-start: 0.5rem; color: #666;">貼り付け▼</p>
            <textarea id="ccfoUnit" style="max-height: 20rem;"></textarea>
          </div>
        </details>

        <details class="square" name="aside">
          <summary>まとめて入力</summary>
          <div>
            <div style="margin-block: 0.75rem;">
              <button id="separater" class="defBtn">セパレータ</button>
              <button id="input" class="defBtn">入力</button>
            </div>
            <textarea id="bulkInput"></textarea>
          </div>
        </details>

      </aside>

      <!-- 入力欄 -->
      <section style="width: min(23rem, 100%);">
        <hgroup>
          <h2>入力</h2>
          <button id="clear" class="defBtn" onclick="initialize()" style="margin-inline-start: 0.75rem;">クリア</button>
        </hgroup>

        <details name="setting" style="margin-block-start: 0;">
          <summary>チャパレ設定</summary>
          <div style="margin-block: 0.5rem;">
            <!-- 選択式設定 -->
            <div class="settingWrapper" style="margin-block-start: 0;">
              <span>システム</span>
              <label class="toggle-button">
                <input type="checkbox" id="system" />
                <span class="slider"></span>
                <span class="not-checked">CoC6th</span>
                <span class="checked">CoC7th</span>
              </label>

              <span>判定ダイス</span>
              <select id="dice">
                <option value="CC">CC</option>
                <option value="CCB" selected>CCB</option>
                <option value="1d100">1d100</option>
              </select>

              <span>形式</span>
              <select id="dice2">
                <option value=''>CCB<=70 【...】</option>
                <option value='s'>sCCB<=70 【...】</option>
                <option value='@' selected>CCB 【...】@70</option>
              </select>

              <span></span>
              <div class="settingWrapper" style="margin: 0;column-gap: 0.5rem;">
                <span style="padding-inline: 0.5rem;">単体ダイス</span>
                <label class="toggle-button">
                  <input type="checkbox" id="sDice" />
                  <span class="slider"></span>
                  <span class="not-checked">オープン</span>
                  <span class="checked">シークレット</span>
                </label>

                <span style="padding-inline: 0.5rem;">choice</span>
                <label class="toggle-button">
                  <input type="checkbox" id="sChoice" />
                  <span class="slider"></span>
                  <span class="not-checked">オープン</span>
                  <span class="checked">シークレット</span>
                </label>
              </div>
            </div>
          </div>
        </details>

        <details name="setting">
          <summary>基本コマ設定</summary>
          <div class="settingWrapper">
            <span>名前/メモ欄</span>
            <div>
              <textarea id="memo"></textarea>
              <p class="annotation">※1行目が名前、2行目以降がメモ欄</p>
            </div>

            <span>ステータス</span>
            <label class="toggle-button">
              <input type="checkbox" id="secret" />
              <span class="slider"></span>
              <span class="not-checked">公開</span>
              <span class="checked">秘匿</span>
            </label>

            <span>発言アイコン</span>
            <label class="toggle-button">
              <input type="checkbox" id="invisible" />
              <span class="slider"></span>
              <span class="not-checked">表示</span>
              <span class="checked">非表示</span>
            </label>

            <span>コマ一覧</span>
            <label class="toggle-button">
              <input type="checkbox" id="hideStatus" />
              <span class="slider"></span>
              <span class="not-checked">表示</span>
              <span class="checked">非表示</span>
            </label>
          </div>
        </details>

        <!-- <hr> -->

        <!-- 追加パラメータ・ステータス -->
        <details name="setting">
          <summary>追加コマ設定</summary>
          <div class="settingWrapper">
            <div style="align-self: center;">発言カラー</div>
            <div style="display: grid; grid-template-columns: auto auto 1fr; align-items: center; gap: 0.5rem; ">
              <input type="color" id="color" value="#888888">
              <input type="text" style="background-color: transparent; width:7ch; padding-block: 0.5rem;"
                placeholder="#888888">
              <p class="ccfoliaName">探索者名</p>
            </div>

            <span>コマサイズ</span>
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 0.5rem;">
              <input type="range" id="unitSize" min=1 max=30 value=4>
              <input type="number" min=1 value=4>
            </div>

            <span>差分<span style="font-size: smaller;"> (ラベル)</span></span>
            <textarea id="diff"></textarea>

            <span>パラメータ</span>
            <table id="addParamsTable">
              <caption>
                <button id="addParam">追加</button>
                <button id="delParam">削除</button>
              </caption>
              <thead>
                <tr>
                  <th>ラベル</th>
                  <th>値</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>

            <span>ステータス</span>
            <table id="addStatsTable">
              <caption>
                <button id="addStat">追加</button>
                <button id="delStat">削除</button>
              </caption>
              <thead>
                <tr>
                  <th>ラベル</th>
                  <th>現在値</th>
                  <th>最大値</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </details>

        <hr>

        <!-- 能力値 -->
        <div style="margin-block: 0.5rem;">
          <span style="font-weight: 500;">能力値 etc.</span>
          <div class="tips">
            <span class="material-symbols-outlined">info</span>
            <div>
              <ul>
                <li class="ok">途中改行</li>
                <li class="ok">謎の半角/全角スペース</li>
                <li class="ok">全角英数字</li>
              </ul>
            </div>
          </div>
        </div>
        <textarea id="stats"></textarea>

        <!-- 技能・ダイス・choice -->
        <div style="margin-block: 1rem 0.5rem;">
          <span style="font-weight: 500;">技能・ダイス etc.</span>
          <div class="tips">
            <span class="material-symbols-outlined">info</span>
            <div>
              <ul>
                <li class="ng">途中改行</li>
                <li class="ok">謎の半角/全角スペース</li>
                <li class="ok">全角の記号/英数字</li>
              </ul>
              <p style="margin-block: 0.5rem;">
                <span class="title">消す文字（正規表現）：</span>
              </p>
              <input type="text" id="delChar" value=" …「」『』【】〈〉《》≪≫"
                style="font-family: 'Zen Kaku Gothic New';field-sizing: content;">
            </div>
          </div>
        </div>
        <textarea id="skills"></textarea>
        <p class="annotation">※半角スペースはアンダーバー(_)で代記</p>

      </section>

      <div class="triangle"></div>

      <!-- 出力欄 -->
      <section style="width: max-content;">
        <h2>出力</h2>
        <div class="outputDiv">
          <div class="outputL">
            <table id="paramsTable" class="valueTable secretTable" style="grid-row: 1 / 3;">
              <caption>パラメータ</caption>
              <tbody>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>STR</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>CON</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>POW</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>DEX</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>APP</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>SIZ</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>INT</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>EDU</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>DB</th>
                  <td></td>
                </tr>
              </tbody>
            </table>
            <table id="statsTable" class="valueTable secretTable">
              <caption>ステータス</caption>
              <tbody>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>HP</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>MP</th>
                  <td></td>
                </tr>
                <tr>
                  <td><input type="checkbox"></td>
                  <th>SAN</th>
                  <td></td>
                </tr>
              </tbody>
            </table>
            <table id="elseTable" class="valueTable">
              <caption>他</caption>
              <tbody>
                <tr>
                  <th>アイデア</th>
                  <td></td>
                </tr>
                <tr>
                  <th>幸運</th>
                  <td></td>
                </tr>
                <tr>
                  <th>知識</th>
                  <td></td>
                </tr>
              </tbody>
            </table>
            <table id="skillTable">
              <caption>技能</caption>
              <tbody>
                <tr style="height: 1.5rem;">
                  <th></th>
                  <td></td>
                </tr>
                <tr style="height: 1.5rem;">
                  <th></th>
                  <td></td>
                </tr>
                <tr style="height: 1.5rem;">
                  <th></th>
                  <td></td>
                </tr>
                <tr style="height: 1.5rem;">
                  <th></th>
                  <td></td>
                </tr>
                <tr style="height: 1.5rem;">
                  <th></th>
                  <td></td>
                </tr>
                <tr style="height: 1.5rem;">
                  <th></th>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
          <table id="chatTable" class="secretTable">
            <thead>
              <tr>
                <th>✕</th>
                <th>s</th>
                <th>chat palette</th>
              </tr>
            </thead>
            <tbody>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr style="height: 1.5rem;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="settingWrapper" name="chatTarget">
            <span>差分</span>
            <label class="toggle-button">
              <input type="checkbox" value="diff" checked />
              <span class="slider"></span>
            </label>

            <span>SANc</span>
            <label class="toggle-button">
              <input type="checkbox" value="sanc" />
              <span class="slider"></span>
            </label>

            <span>知識etc.</span>
            <label class="toggle-button">
              <input type="checkbox" value="ide" checked />
              <span class="slider"></span>
            </label>

            <span>技能</span>
            <label class="toggle-button">
              <input type="checkbox" value="skill" checked />
              <span class="slider"></span>
            </label>

            <span>ステ*5</span>
            <label class="toggle-button">
              <input type="checkbox" value="stats" checked />
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </section>

    </main>
    <footer>
      <div class="footerContent">
        <div>
          <h2>CONTACT</h2>
          <span style="font-size: larger;">セイル</span>
          <br>
          Booth: https://seils.booth.pm/
          <br>
          X(旧Twitter): @seilor0
        </div>
        <div>
          <h2>CAUTION</h2>
          <ul>
            <li>
              作業環境：Windows11 / Google Chrome
              <br>
              上記以外の環境はテストしていないため、不具合が出る可能性があります。
            </li>
            <li>
              当サイトの利用によるいかなるトラブルも作者は責任を負いません。
              <br>
              ご利用は自己責任にてお願いいたします。
            </li>
            <li>
              何かあれば左の連絡先までご連絡ください。
            </li>
          </ul>
        </div>
        <div>
          <h2>UPDATE</h2>
          <table>
            <thead>
              <tr>
                <th>date</th>
                <th>version</th>
                <th>detail</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2025.08.13</td>
                <td>1.0</td>
                <td>サイト公開</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <pre style="text-align: center;margin-block-end: unset;white-space: pre-wrap;">
当サイトは、「株式会社アークライト」及び「株式会社KADOKAWA」が権利を有する『クトゥルフ神話TRPG』シリーズの二次創作物です。
Call of Cthulhu is copyright ©1981, 2015, 2019 by Chaosium Inc. ;all rights reserved. Arranged by Arclight Inc. Call of Cthulhu is a registered trademark of Chaosium Inc.
PUBLISHED BY KADOKAWA CORPORATION 「クトゥルフ神話TRPG」「新クトゥルフ神話TRPG」</pre>
    </footer>
    <div class="buttonWrap">
      <button id="exUnit" class="export">ココフォリアコマ出力</button>
      <button id="exChat" class="export">チャパレ出力</button>
    </div>
  </div>
  <script type="module" src="code.js"></script>
</body>

</html>